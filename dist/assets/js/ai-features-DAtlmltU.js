import{r as e,j as a,S as s,O as t,P as o,C as r,a as i,X as n,T as d,D as c,R as l,b as m,c as u,d as g,e as p,f as h,g as x,A as f,h as b,i as v,k as N,l as j,V as y,m as w,n as C,o as k,p as S,B as _,q as z,s as L,F as D,t as A,L as P,u as R,v as I,w as E,x as T,Z as O}from"./vendor-react-huKtfhlb.js";import{t as B,c as H,a as q}from"./vendor-CNX07ziR.js";import{c as J}from"./vendor-supabase-DSnDMb8T.js";function $(...e){return B(H(e))}const M=J("https://zpufcvesenbhtmizmjiz.supabase.co","YOUR_ANON_KEY_HERE",{auth:{storage:"undefined"!=typeof window?localStorage:void 0,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),F=q("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-gradient-primary text-primary-foreground shadow-medium hover:shadow-large hover:scale-[1.02] active:scale-[0.98]",destructive:"bg-destructive text-destructive-foreground shadow-medium hover:bg-destructive/90 hover:shadow-large",outline:"border border-input bg-background hover:bg-gradient-accent hover:text-accent-foreground hover:border-accent/50 hover:shadow-medium",secondary:"bg-gradient-secondary text-secondary-foreground shadow-soft hover:shadow-medium hover:scale-[1.02]",ghost:"hover:bg-gradient-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",success:"bg-success text-success-foreground shadow-medium hover:bg-success/90 hover:shadow-large",warning:"bg-warning text-warning-foreground shadow-medium hover:bg-warning/90 hover:shadow-large",premium:"bg-gradient-primary text-primary-foreground shadow-glow hover:shadow-xl hover:scale-[1.02] relative overflow-hidden"},size:{default:"h-11 px-6 py-2",sm:"h-9 rounded-md px-4",lg:"h-12 rounded-lg px-8",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),U=e.forwardRef(({className:e,variant:t,size:o,asChild:r=!1,...i},n)=>{const d=r?s:"button";return a.jsx(d,{className:$(F({variant:t,size:o,className:e})),ref:n,...i})});U.displayName="Button";const G=l,Q=m,V=o,K=e.forwardRef(({className:e,...s},o)=>a.jsx(t,{ref:o,className:$("fixed inset-0 z-50 bg-black/80 dark:bg-black/90 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));K.displayName=t.displayName;const Y=e.forwardRef(({className:e,children:s,...t},o)=>a.jsxs(V,{children:[a.jsx(K,{}),a.jsxs(r,{ref:o,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg","dark:border-gray-700 dark:bg-gray-900 dark:shadow-2xl",e),...t,children:[s,a.jsxs(i,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground dark:hover:bg-gray-800 dark:text-gray-400 dark:hover:text-gray-200",children:[a.jsx(n,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Y.displayName=r.displayName;const Z=({className:e,...s})=>a.jsx("div",{className:$("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});Z.displayName="DialogHeader";const W=({className:e,...s})=>a.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});W.displayName="DialogFooter";const X=e.forwardRef(({className:e,...s},t)=>a.jsx(d,{ref:t,className:$("text-lg font-semibold leading-none tracking-tight",e),...s}));X.displayName=d.displayName;const ee=e.forwardRef(({className:e,...s},t)=>a.jsx(c,{ref:t,className:$("text-sm text-muted-foreground",e),...s}));ee.displayName=c.displayName;const ae=q("inline-flex items-center rounded-full border px-3 py-1 text-xs font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-gradient-primary text-primary-foreground shadow-soft hover:shadow-medium",secondary:"border-transparent bg-gradient-secondary text-secondary-foreground shadow-soft hover:shadow-medium",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-soft hover:bg-destructive/90",outline:"text-foreground border-border hover:bg-accent/50",success:"border-transparent bg-success text-success-foreground shadow-soft",warning:"border-transparent bg-warning text-warning-foreground shadow-soft",info:"border-transparent bg-info text-info-foreground shadow-soft"}},defaultVariants:{variant:"default"}});function se({className:e,variant:s,...t}){return a.jsx("div",{className:$(ae({variant:s}),e),...t})}const te=v,oe=N,re=g,ie=e.forwardRef(({className:e,...s},t)=>a.jsx(u,{className:$("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));ie.displayName=u.displayName;const ne=e.forwardRef(({className:e,...s},t)=>a.jsxs(re,{children:[a.jsx(ie,{}),a.jsx(p,{ref:t,className:$("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s})]}));ne.displayName=p.displayName;const de=({className:e,...s})=>a.jsx("div",{className:$("flex flex-col space-y-2 text-center sm:text-left",e),...s});de.displayName="AlertDialogHeader";const ce=({className:e,...s})=>a.jsx("div",{className:$("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});ce.displayName="AlertDialogFooter";const le=e.forwardRef(({className:e,...s},t)=>a.jsx(h,{ref:t,className:$("text-lg font-semibold",e),...s}));le.displayName=h.displayName;const me=e.forwardRef(({className:e,...s},t)=>a.jsx(x,{ref:t,className:$("text-sm text-muted-foreground",e),...s}));me.displayName=x.displayName;const ue=e.forwardRef(({className:e,...s},t)=>a.jsx(f,{ref:t,className:$(F(),e),...s}));ue.displayName=f.displayName;const ge=e.forwardRef(({className:e,...s},t)=>a.jsx(b,{ref:t,className:$(F({variant:"outline"}),"mt-2 sm:mt-0",e),...s}));ge.displayName=b.displayName;const pe=e.forwardRef(({className:e,type:s,...t},o)=>a.jsx("input",{type:s,className:$("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:o,...t}));pe.displayName="Input";const he=e.forwardRef(({className:e,children:s,...t},o)=>a.jsxs(j,{ref:o,className:$("relative overflow-hidden",e),...t,children:[a.jsx(y,{className:"h-full w-full rounded-[inherit]",children:s}),a.jsx(xe,{}),a.jsx(w,{})]}));he.displayName=j.displayName;const xe=e.forwardRef(({className:e,orientation:s="vertical",...t},o)=>a.jsx(C,{ref:o,orientation:s,className:$("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...t,children:a.jsx(k,{className:"relative flex-1 rounded-full bg-border"})}));xe.displayName=C.displayName;const fe=e.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...o},r)=>a.jsx(S,{ref:r,decorative:t,orientation:s,className:$("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...o}));function be(a,s){const[t,o]=e.useState(a);return e.useEffect(()=>{const e=setTimeout(()=>{o(a)},s);return()=>{clearTimeout(e)}},[a,s]),t}fe.displayName=S.displayName;const ve=({isOpen:s,onClose:t,onResultSelect:o,filters:r})=>{const{query:i,setQuery:d,results:c,isLoading:l,error:m,searchHistory:u,hybridSearch:g,getSmartSuggestions:p,clearResults:h,clearSearchHistory:x}=(()=>{const[a,s]=e.useState(""),[t,o]=e.useState([]),[r,i]=e.useState(!1),[n,d]=e.useState(null),[c,l]=e.useState([]);be(a,300),e.useEffect(()=>{const e=localStorage.getItem("smart_search_history");if(e)try{l(JSON.parse(e))}catch(a){}},[]);const m=e.useCallback((e,a)=>{const s=e.toLowerCase().trim(),t=[{text:a.assunto,weight:3},{text:a.descricao,weight:2},{text:a.categoria,weight:1},{text:a.status,weight:1}];for(const o of t)if(o.text&&o.text.toLowerCase().includes(s)){const e=o.text,a=e.toLowerCase().indexOf(s);if(-1!==a){const t=Math.max(0,a-20),o=Math.min(e.length,a+s.length+20);return e.substring(t,o)}}return s},[]),u=e.useCallback((e,a)=>{const s=e.toLowerCase().trim();if(a.titulo&&a.titulo.toLowerCase().includes(s))return a.titulo;if(a.conteudo&&a.conteudo.toLowerCase().includes(s)){const e=a.conteudo,t=e.toLowerCase().indexOf(s);if(-1!==t){const a=Math.max(0,t-30),o=Math.min(e.length,t+s.length+30);return e.substring(a,o)}}return a.tags&&a.tags.some(e=>e.toLowerCase().includes(s))&&a.tags.find(e=>e.toLowerCase().includes(s))||s},[]),g=e.useCallback(async e=>{try{const{data:a,error:s}=await M.from("chamados").select("\n          id,\n          resumo,\n          notas,\n          grau,\n          created_at,\n          nome_usuario_afetado\n        ").or(`resumo.ilike.%${e}%,notas.ilike.%${e}%,grau.ilike.%${e}%`).order("created_at",{ascending:!1}).limit(10);return s?p(e):a&&0!==a.length?(a||[]).map((a,s)=>({id:a.id,type:"chamado",title:a.resumo||"Chamado sem título",description:a.notas||"Sem descrição",score:100-s,metadata:{status:"Aberto",categoria:a.grau,criado_por:a.nome_usuario_afetado,data_criacao:a.created_at,specificId:a.id,searchTerm:e,highlightText:m(e,{assunto:a.resumo,descricao:a.notas,categoria:a.grau,status:"Aberto"}),directUrl:`/chamado/${a.id}`}})):p(e)}catch(a){return p(e)}},[]),p=e.useCallback(e=>{const a=[{id:"chamado-1",assunto:"Questão com login no sistema",descricao:"Usuário não consegue acessar o sistema com suas credenciais",status:"Em andamento",categoria:"Suporte Técnico",created_at:(new Date).toISOString(),usuario_criador_nome:"João Silva"},{id:"chamado-2",assunto:"Erro na geração de relatórios",descricao:"Sistema apresenta erro ao tentar gerar relatórios mensais",status:"Pendente",categoria:"Bug",created_at:new Date(Date.now()-864e5).toISOString(),usuario_criador_nome:"Maria Santos"},{id:"chamado-3",assunto:"Solicitação de nova funcionalidade",descricao:"Implementar filtro avançado na tela de consultas",status:"Análise",categoria:"Melhoria",created_at:new Date(Date.now()-1728e5).toISOString(),usuario_criador_nome:"Pedro Costa"},{id:"chamado-4",assunto:"Configuração de usuário",descricao:"Criar novo usuário no sistema com perfil administrativo",status:"Concluído",categoria:"Configuração",created_at:new Date(Date.now()-2592e5).toISOString(),usuario_criador_nome:"Ana Oliveira"},{id:"chamado-5",assunto:"Backup do sistema",descricao:"Realizar backup completo da base de dados",status:"Agendado",categoria:"Manutenção",created_at:new Date(Date.now()-3456e5).toISOString(),usuario_criador_nome:"Carlos Lima"},{id:"chamado-6",assunto:"Cadastro de Perito - Erro",descricao:"Problema no cadastro de perito judicial no sistema PJe",status:"Em andamento",categoria:"Cadastro",created_at:new Date(Date.now()-432e6).toISOString(),usuario_criador_nome:"Dr. Roberto Pereira"},{id:"chamado-7",assunto:"Nomeação de Perito",descricao:"Solicitação de nomeação de perito para processo judicial",status:"Pendente",categoria:"Processo",created_at:new Date(Date.now()-5184e5).toISOString(),usuario_criador_nome:"Juiz Carlos Mendes"},{id:"chamado-8",assunto:"Lista de Peritos Habilitados",descricao:"Atualização da lista de peritos habilitados para nomeação",status:"Concluído",categoria:"Administração",created_at:new Date(Date.now()-6048e5).toISOString(),usuario_criador_nome:"Secretaria Judicial"}],s=e.toLowerCase().trim(),t=s.split(" ").filter(e=>e.length>0);return a.filter(e=>{const a=[e.assunto,e.descricao,e.categoria,e.status,e.usuario_criador_nome].join(" ").toLowerCase();return t.some(e=>a.includes(e))||a.includes(s)}).map((a,s)=>({id:a.id,type:"chamado",title:a.assunto,description:a.descricao,score:100-s,metadata:{status:a.status,categoria:a.categoria,criado_por:a.usuario_criador_nome,data_criacao:a.created_at,specificId:a.id,searchTerm:e,highlightText:m(e,a),directUrl:`/chamado/${a.id}`}}))},[]),h=e.useCallback(async e=>{const a=e.toLowerCase().trim(),s=a.split(" ").filter(e=>e.length>0);return[{id:"doc-1",titulo:"Como criar um novo chamado",conteudo:"Guia completo para criação de chamados no sistema NAPJe. Inclui passo a passo detalhado.",categoria:"Documentação",tags:["chamado","criação","guia","tutorial"]},{id:"doc-2",titulo:"Procedimentos de backup",conteudo:"Instruções detalhadas para realizar backup dos dados do sistema de forma segura.",categoria:"Procedimentos",tags:["backup","segurança","dados","manutenção"]},{id:"doc-3",titulo:"Configuração de usuários",conteudo:"Como configurar novos usuários no sistema, definir permissões e perfis de acesso.",categoria:"Administração",tags:["usuário","configuração","admin","permissões"]},{id:"doc-4",titulo:"Troubleshooting comum",conteudo:"Soluções para problemas frequentes no sistema, erros comuns e suas correções.",categoria:"Suporte",tags:["problema","solução","suporte","erro"]},{id:"doc-5",titulo:"Integração com PJe",conteudo:"Como integrar o sistema com o PJe, configurações necessárias e troubleshooting.",categoria:"Integração",tags:["pje","integração","sistema","configuração"]},{id:"doc-6",titulo:"Manual do usuário",conteudo:"Manual completo do usuário com todas as funcionalidades do sistema NAPJe.",categoria:"Documentação",tags:["manual","usuário","funcionalidades","guia"]},{id:"doc-7",titulo:"Relatórios e dashboards",conteudo:"Como gerar relatórios personalizados e configurar dashboards no sistema.",categoria:"Relatórios",tags:["relatório","dashboard","análise","dados"]},{id:"doc-8",titulo:"Segurança e auditoria",conteudo:"Práticas de segurança, logs de auditoria e monitoramento do sistema.",categoria:"Segurança",tags:["segurança","auditoria","logs","monitoramento"]},{id:"doc-9",titulo:"API e integrações",conteudo:"Documentação da API REST e como integrar com sistemas externos.",categoria:"Desenvolvimento",tags:["api","rest","integração","desenvolvimento"]},{id:"doc-10",titulo:"FAQ - Perguntas frequentes",conteudo:"Respostas para as perguntas mais frequentes sobre o sistema NAPJe.",categoria:"FAQ",tags:["faq","perguntas","respostas","ajuda"]},{id:"doc-11",titulo:"Configuração de Horário e Expediente",conteudo:"Como configurar horários de funcionamento, plantões e escalas de trabalho no sistema. Inclui configuração de feriados e exceções.",categoria:"Configuração",tags:["horário","expediente","plantão","trabalho","feriado","escala"]},{id:"doc-12",titulo:"Gestão de Horários de Atendimento",conteudo:"Definir horários de atendimento ao público, configurar intervalos e pausas. Gestão de horário de funcionamento dos serviços.",categoria:"Atendimento",tags:["horário","atendimento","público","serviço","funcionamento","intervalo"]},{id:"doc-13",titulo:"Registro de Ponto e Controle de Horário",conteudo:"Sistema de controle de ponto eletrônico, registro de entrada e saída, gestão de horas extras e compensação.",categoria:"RH",tags:["horário","ponto","entrada","saída","controle","horas","extra"]},{id:"doc-14",titulo:"Cadastro e Gestão de Peritos",conteudo:"Manual completo para cadastro de peritos judiciais, incluindo habilitação, nomeação e gestão de especialidades. Procedimentos para manter lista atualizada de peritos.",categoria:"Judicial",tags:["perito","cadastro","nomeação","habilitação","especialidade","judicial"]},{id:"doc-15",titulo:"Nomeação de Perito em Processos",conteudo:"Guia para nomeação de peritos em processos judiciais, critérios de seleção, documentação necessária e procedimentos administrativos.",categoria:"Processo",tags:["perito","nomeação","processo","seleção","documentação","administrativo"]},{id:"doc-16",titulo:"Lista de Peritos Habilitados",conteudo:"Como consultar e atualizar a lista de peritos habilitados por especialidade, incluindo dados de contato e área de atuação.",categoria:"Consulta",tags:["perito","lista","habilitado","especialidade","contato","atuação"]}].filter(e=>{const t=[e.titulo,e.conteudo,e.categoria,...e.tags].join(" ").toLowerCase();return s.some(e=>t.includes(e))||t.includes(a)||e.tags.some(e=>e.toLowerCase().includes(a))}).map((a,s)=>({id:a.id,type:"conhecimento",title:a.titulo,description:a.conteudo,score:90-s,metadata:{categoria:a.categoria,tags:a.tags,specificId:a.id,searchTerm:e,highlightText:u(e,a),directUrl:`/base-conhecimento/${a.id}`}}))},[]),x=e.useCallback(async e=>[{id:"ai-1",type:"conhecimento",title:`Sugestão IA: ${e}`,description:`Baseado na sua busca por "${e}", aqui estão algumas sugestões relevantes para o sistema NAPJe.`,score:95,metadata:{fonte:"ChatGPT",categoria:"Sugestão IA"}}],[]),f=e.useCallback(e=>[{id:"suggestion-help",type:"conhecimento",title:`Não encontrou "${e}"? Aqui estão algumas dicas`,description:'Tente termos mais específicos como "problema login", "erro sistema", "configurar usuário", "como fazer backup"',score:50,metadata:{categoria:"Ajuda",tipo:"dicas",action:"base-conhecimento"}},{id:"suggestion-manual",type:"conhecimento",title:"Consultar Base de Conhecimento",description:"Acesse nossa base de conhecimento completa com manuais, tutoriais e documentação do sistema",score:45,metadata:{categoria:"Documentação",tipo:"manual",action:"base-conhecimento"}},{id:"suggestion-create",type:"chamado",title:"Criar Novo Chamado",description:"Não encontrou o que procura? Crie um novo chamado para obter ajuda personalizada da nossa equipe",score:40,metadata:{categoria:"Ação",tipo:"criar",action:"criar-chamado"}},{id:"suggestion-recent",type:"chamado",title:"Ver Chamados Recentes",description:"Consulte os chamados mais recentes para ver se sua dúvida já foi respondida",score:35,metadata:{categoria:"Consulta",tipo:"historico",action:"chamados-recentes"}}],[]),b=e.useCallback(async(e,a)=>{if(!e.trim())return o([]),[];const{types:s=["chamado","conhecimento"],limit:t=20}=a||{};i(!0),d(null),e.toLowerCase().includes("problema")||e.toLowerCase().includes("perito");try{const a=[];s.includes("chamado")&&a.push(g(e).catch(a=>p(e))),s.includes("conhecimento")&&(a.push(h(e).catch(e=>[])),a.push(x(e).catch(e=>[])));const i=(await Promise.all(a)).flat().filter(e=>null!=e).sort((e,a)=>a.score-e.score).slice(0,t);if(0===i.length){const a=f(e);i.push(...a)}if(o(i),e.trim().length>0)try{l(a=>{const s=[e,...a.filter(a=>a!==e)].slice(0,10);return localStorage.setItem("smart_search_history",JSON.stringify(s)),s})}catch(r){}return i}catch(n){d("Erro ao realizar busca. Tente novamente.");const a=f(e);return o(a),a}finally{i(!1)}},[g,h,x,f,p]),v=e.useCallback(async e=>e.length<2?[]:["problema login","erro sistema","sistema lento","problema acesso","horário expediente","horário atendimento","configurar horário","horário plantão","configurar usuário","configuração sistema","configurar backup","configurar relatório","como criar chamado","como fazer backup","como gerar relatório","como configurar","manual usuário","documentação sistema","guia configuração","tutorial","suporte técnico","ajuda sistema","troubleshooting","solução problema","integração pje","configurar pje","api sistema","webhook","cadastro perito","nomeação perito","lista perito","perito habilitado","perito judicial"].filter(a=>a.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().split(" ").some(e=>a.toLowerCase().includes(e))).slice(0,6),[]),N=e.useCallback(()=>{o([]),d(null)},[]),j=e.useCallback(()=>{l([]),localStorage.removeItem("smart_search_history")},[]),y=e.useCallback(e=>b(e,{types:["chamado","conhecimento"]}),[b]),w=e.useCallback(e=>b(e,{types:["chamado","conhecimento"]}),[b]),C=e.useCallback((e,a)=>b(e,{types:[a]}),[b]);return{query:a,setQuery:s,results:t,isLoading:r,error:n,searchHistory:c,hybridSearch:b,semanticSearch:y,fuzzySearch:w,searchEntity:C,getSmartSuggestions:v,clearResults:N,clearSearchHistory:j}})(),[f,b]=e.useState(r?.types||["chamado","conhecimento"]),[v,N]=e.useState([]),[j,y]=e.useState(!1),[w,C]=e.useState(0),[k,S]=e.useState(!1),B=be(i,500);e.useEffect(()=>{s&&!i&&(y(!0),S(!1))},[s,i]),e.useEffect(()=>{B&&B.trim().length>=2?(B.toLowerCase().includes("perito"),g(B.trim(),{types:f,limit:20}).then(e=>{B.toLowerCase().includes("perito"),e.length}).catch(e=>{S(!0),h()}),y(!1)):B&&B.trim().length>0&&B.trim().length<2?(h(),y(!1)):(h(),y(!0))},[B,f,g,h]),e.useEffect(()=>{B&&B.length>2?p(B).then(e=>{N(e)}).catch(e=>{}):N([])},[B,p]),e.useEffect(()=>{const e=e=>{if(!s)return;const a=c.length+v.length;switch(e.key){case"ArrowDown":e.preventDefault(),C(e=>(e+1)%a);break;case"ArrowUp":e.preventDefault(),C(e=>(e-1+a)%a);break;case"Enter":if(e.preventDefault(),w<c.length)H(c[w]);else if(w<a){const e=w-c.length;d(v[e])}break;case"Escape":t()}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[s,c,v,w,t]);const H=e=>{e.title?.toLowerCase().includes("problema")||e.title?.toLowerCase().includes("perito");try{const a={...e,metadata:{...e.metadata,searchTerm:e.metadata?.searchTerm||i.trim(),originalQuery:i.trim()}};o?.(a),t()}catch(a){}},q=e=>{switch(e){case"chamado":return a.jsx(D,{className:"h-4 w-4 text-blue-500"});case"conhecimento":return a.jsx(A,{className:"h-4 w-4 text-green-500"});case"atalho":return a.jsx(O,{className:"h-4 w-4 text-purple-500"});default:return a.jsx(D,{className:"h-4 w-4 text-gray-500"})}};return a.jsx(G,{open:s,onOpenChange:t,children:a.jsxs(Y,{className:"max-w-3xl max-h-[85vh] p-0 bg-gradient-to-br from-card/95 via-card/90 to-card/95 backdrop-blur-xl border-border/20 shadow-xl",children:[a.jsxs(Z,{className:"relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-purple-500/3 to-blue-500/5"}),a.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_30%,rgba(120,119,198,0.08),transparent_60%)]"}),a.jsxs("div",{className:"relative p-6 pb-5",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 items-center",children:[a.jsx("div",{className:"lg:col-span-10",children:a.jsxs(X,{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"p-3 bg-gradient-to-br from-primary via-primary/90 to-purple-600 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300",children:a.jsx(_,{className:"h-6 w-6 text-white drop-shadow-sm"})}),a.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full border-2 border-white animate-pulse"})]})}),a.jsxs("div",{className:"flex flex-col justify-center min-h-[3rem]",children:[a.jsx("div",{className:"mb-1",children:a.jsxs("div",{className:"flex items-center gap-3 text-xl lg:text-2xl font-bold text-foreground",children:[a.jsx("span",{className:"bg-gradient-to-r from-primary via-purple-600 to-blue-600 bg-clip-text text-transparent",children:"Busca Inteligente"}),a.jsxs("div",{className:"flex items-center gap-1 bg-primary/10 backdrop-blur-sm px-2 py-1 rounded-full border border-primary/20",children:[a.jsx(z,{className:"h-3 w-3 text-primary animate-pulse"}),a.jsx("span",{className:"text-xs font-medium text-primary",children:"IA"})]})]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm text-muted-foreground font-medium",children:"Encontre chamados, documentos e muito mais"})]})]})]})}),a.jsx("div",{className:"lg:col-span-2 flex justify-end",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"hidden sm:flex items-center gap-1 text-xs text-muted-foreground bg-muted/30 backdrop-blur-sm px-2 py-1 rounded-lg border border-border/20",children:a.jsx("span",{className:"font-mono",children:"⌘K"})}),a.jsx(U,{variant:"ghost",size:"sm",onClick:t,className:"h-9 w-9 p-0 hover:bg-accent/80 hover:scale-105 rounded-xl transition-all duration-200 shadow-sm",children:a.jsx(n,{className:"h-4 w-4"})})]})})]}),a.jsx("div",{className:"mt-4 h-px bg-gradient-to-r from-transparent via-border/40 to-transparent"})]})]}),a.jsxs("div",{className:"px-6 pb-6 space-y-5",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 flex items-center gap-2",children:a.jsx(L,{className:"h-5 w-5 text-muted-foreground"})}),a.jsx(pe,{value:i,onChange:e=>d(e.target.value),placeholder:"Digite sua busca... (ex: problema, usuário, backup)",className:"pl-12 pr-12 h-14 text-base bg-card/60 backdrop-blur-sm border-border/30 focus:border-primary focus:ring-2 focus:ring-primary/20 rounded-xl shadow-soft",autoFocus:!0}),i&&a.jsx(U,{variant:"ghost",size:"sm",onClick:()=>d(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-accent rounded-lg",children:a.jsx(n,{className:"h-4 w-4"})}),!i&&a.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2",children:a.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground bg-muted/50 px-2 py-1 rounded-md",children:[a.jsx("span",{children:"⌘"}),a.jsx("span",{children:"K"})]})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:[{key:"chamado",label:"Chamados",icon:D,color:"bg-blue-500"},{key:"conhecimento",label:"Base de Conhecimento",icon:A,color:"bg-green-500"}].map(({key:e,label:s,icon:t,color:o})=>a.jsxs(U,{variant:f.includes(e)?"default":"outline",size:"sm",onClick:()=>{return a=e,void b(e=>e.includes(a)?e.filter(e=>e!==a):[...e,a]);var a},className:"flex items-center gap-2 h-9 px-4 text-sm rounded-xl transition-all duration-200 "+(f.includes(e)?"bg-primary hover:bg-primary/90 text-primary-foreground shadow-soft":"bg-card/60 hover:bg-card border-border/30 hover:border-border/50"),children:[a.jsx(t,{className:"h-4 w-4"}),s,f.includes(e)&&a.jsx("div",{className:"w-1.5 h-1.5 bg-current rounded-full animate-pulse"})]},e))}),a.jsxs(he,{className:"max-h-[400px]",children:[l?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-2xl flex items-center justify-center animate-pulse",children:a.jsx(P,{className:"h-8 w-8 text-white animate-spin"})}),a.jsx("div",{className:"absolute -inset-2 bg-gradient-primary rounded-2xl opacity-20 animate-ping"})]}),a.jsxs("div",{className:"text-center mt-6",children:[a.jsx("p",{className:"text-lg font-semibold text-foreground",children:"Buscando..."}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Analisando chamados e documentos"})]})]}):m?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 bg-destructive/10 rounded-2xl flex items-center justify-center mx-auto mb-4",children:a.jsx(n,{className:"h-8 w-8 text-destructive"})}),a.jsx("p",{className:"text-lg font-semibold text-foreground",children:"Erro na busca"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:m}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>d(""),className:"mt-4",children:"Tentar novamente"})]}):j&&u.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"flex items-center justify-between px-1",children:a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx(R,{className:"h-4 w-4 text-primary"}),"Histórico de Busca"]})}),a.jsx("div",{className:"space-y-1",children:u.slice(0,5).map((e,s)=>a.jsx(U,{variant:"ghost",onClick:()=>d(e),className:"w-full justify-start h-auto p-3 text-left hover:bg-card/60 rounded-xl group",children:a.jsxs("div",{className:"flex items-center gap-3 w-full",children:[a.jsx("div",{className:"p-1.5 bg-muted/50 rounded-lg group-hover:bg-primary/10 transition-colors",children:a.jsx(L,{className:"h-3 w-3 text-muted-foreground group-hover:text-primary"})}),a.jsx("span",{className:"text-sm text-foreground group-hover:text-primary transition-colors",children:e}),a.jsx(I,{className:"h-3 w-3 text-muted-foreground ml-auto opacity-0 group-hover:opacity-100 transition-opacity"})]})},s))}),a.jsx("div",{className:"pt-2 border-t border-border/20",children:a.jsxs(te,{children:[a.jsx(oe,{asChild:!0,children:a.jsxs(U,{variant:"outline",size:"sm",className:"w-full text-xs text-muted-foreground hover:text-destructive hover:border-destructive/30",children:[a.jsx(E,{className:"h-3 w-3 mr-2"}),"Limpar todo o histórico"]})}),a.jsxs(ne,{className:"bg-card/95 backdrop-blur-xl border-border/20",children:[a.jsxs(de,{children:[a.jsxs(le,{className:"flex items-center gap-2",children:[a.jsx(E,{className:"h-5 w-5 text-destructive"}),"Limpar Histórico de Busca"]}),a.jsx(me,{children:"Tem certeza que deseja limpar todo o histórico de busca? Esta ação não pode ser desfeita."})]}),a.jsxs(ce,{children:[a.jsx(ge,{children:"Cancelar"}),a.jsxs(ue,{onClick:()=>{x()},className:"bg-destructive hover:bg-destructive/90",children:[a.jsx(E,{className:"h-4 w-4 mr-2"}),"Limpar Histórico"]})]})]})]})})]}):c.length>0?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between px-1",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-primary rounded-full animate-pulse"}),"Resultados (",c.length,")"]}),a.jsx("div",{className:"flex gap-1",children:f.map(e=>a.jsx(se,{variant:"secondary",className:"text-xs",children:e},e))})]}),a.jsx("div",{className:"space-y-2",children:c.map((e,s)=>{try{return a.jsx("div",{className:"group p-4 rounded-xl border cursor-pointer transition-all duration-300 "+(s===w?"bg-primary/10 border-primary/30 shadow-soft":"bg-card/60 border-border/20 hover:bg-card/80 hover:border-border/40 hover:shadow-soft"),onClick:()=>{try{H(e)}catch(a){}},children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0 p-2 bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg",children:q(e.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-semibold text-foreground group-hover:text-primary transition-colors line-clamp-1",children:e.title||"Sem título"}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1 line-clamp-2 leading-relaxed",children:e.description||"Sem descrição"}),e.metadata&&a.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.metadata.categoria&&a.jsx(se,{variant:"outline",className:"text-xs bg-card/50",children:e.metadata.categoria}),e.metadata.status&&a.jsx(se,{variant:"outline",className:"text-xs bg-card/50",children:e.metadata.status}),e.metadata.criado_por&&a.jsx(se,{variant:"outline",className:"text-xs bg-card/50",children:e.metadata.criado_por})]})]}),a.jsx("div",{className:"flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(I,{className:"h-5 w-5 text-primary"})})]})},e.id||`result-${s}`)}catch(t){return a.jsx("div",{className:"p-4 rounded-xl border border-destructive/20 bg-destructive/5",children:a.jsx("p",{className:"text-sm text-destructive",children:"Erro ao exibir resultado"})},`error-${s}`)}})})]}):i&&!l?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"w-20 h-20 bg-muted/50 rounded-2xl flex items-center justify-center mx-auto mb-6",children:a.jsx(L,{className:"h-10 w-10 text-muted-foreground"})}),a.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Nenhum resultado encontrado"}),a.jsxs("p",{className:"text-sm text-muted-foreground mb-6 max-w-md mx-auto",children:['Não encontramos nada para "',a.jsx("span",{className:"font-medium text-foreground",children:i}),'". Tente termos diferentes ou verifique a ortografia.']}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsx(U,{variant:"outline",size:"sm",onClick:()=>d(""),children:"Limpar busca"}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>d("problema"),children:'Buscar "problema"'}),a.jsx(U,{variant:"outline",size:"sm",onClick:()=>d("perito"),children:'Buscar "perito"'})]})]}):i?null:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-primary/10 rounded-2xl flex items-center justify-center mx-auto mb-4",children:a.jsx(_,{className:"h-8 w-8 text-primary"})}),a.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Busca Inteligente"}),a.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Digite algo para começar a buscar em chamados e documentos"}),a.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:["horário","problema","perito","usuário","backup","configuração","manual"].map(e=>a.jsx(U,{variant:"outline",size:"sm",onClick:()=>d(e),className:"text-xs",children:e},e))})]}),v.length>0&&a.jsxs(a.Fragment,{children:[a.jsx(fe,{className:"my-6"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-foreground flex items-center gap-2 px-1",children:[a.jsx(T,{className:"h-4 w-4 text-primary"}),"Sugestões de Busca"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:v.map((e,s)=>a.jsx(U,{variant:"ghost",onClick:()=>d(e),className:`justify-start h-auto p-3 text-left text-sm rounded-xl group ${s+c.length===w?"bg-primary/10 border-primary/20":"hover:bg-card/60 border-transparent"} border`,children:a.jsxs("div",{className:"flex items-center gap-3 w-full",children:[a.jsx("div",{className:"p-1.5 bg-muted/50 rounded-lg group-hover:bg-primary/10 transition-colors",children:a.jsx(L,{className:"h-3 w-3 text-muted-foreground group-hover:text-primary"})}),a.jsx("span",{className:"text-foreground group-hover:text-primary transition-colors flex-1",children:e}),a.jsx(I,{className:"h-3 w-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})},s))})]})]})]})]})]})})};export{te as A,U as B,G as D,pe as I,he as S,se as a,oe as b,$ as c,ne as d,de as e,le as f,me as g,ce as h,ge as i,ue as j,F as k,Y as l,Z as m,X as n,ee as o,Q as p,ve as q,W as r,M as s,fe as t};
